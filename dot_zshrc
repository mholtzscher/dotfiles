# zsh settings
export HISTFILE=~/.zsh_history
export HISTFILESIZE=100000
export HISTSIZE=100000

setopt EXTENDED_HISTORY          # Write the history file in the ':start:elapsed;command' format.
setopt INC_APPEND_HISTORY        # Write to the history file immediately, not when the shell exits.
setopt SHARE_HISTORY             # Share history between all sessions.
setopt HIST_EXPIRE_DUPS_FIRST    # Expire a duplicate event first when trimming history.
setopt HIST_IGNORE_DUPS          # Do not record an event that was just recorded again.
setopt HIST_IGNORE_ALL_DUPS      # Delete an old recorded event if a new event is a duplicate.
setopt HIST_FIND_NO_DUPS         # Do not display a previously found event.
setopt HIST_IGNORE_SPACE         # Do not record an event starting with a space.
setopt HIST_SAVE_NO_DUPS         # Do not write a duplicate event to the history file.
setopt HIST_VERIFY               # Do not execute immediately upon history expansion.
setopt APPEND_HISTORY            # append to history file
setopt HIST_NO_STORE             # Don't store history commands

# init starship
eval "$(starship init zsh)"

# init homebrew
eval "$(/opt/homebrew/bin/brew shellenv)"

# init zoxide
eval "$(zoxide init zsh)"

# init thefuck
eval $(thefuck --alias)

# source antidote
source /opt/homebrew/opt/antidote/share/antidote/antidote.zsh

# initialize plugins statically with ${ZDOTDIR:-~}/.zsh_plugins.txt
antidote load

# source custom functions
source ~/.functions.sh

# source asdf
. /opt/homebrew/opt/asdf/libexec/asdf.sh

# source Paytient engineering aliases and functions
if [ -f /Users/michaelholtzcher/code/onboarding/engineering.sh ]; then
    source /Users/michaelholtzcher/code/onboarding/engineering.sh
fi

# I can't remember what this does but I think it sources rust crates? 
export PATH="${PATH}:$HOME/.local/bin"

# Terraform aliases
alias tf='terraform' 

# Git aliases
alias lg='lazygit'

# Navigation aliases
alias ls='lsd'
alias ll='lsd -al'
alias tree='lsd --tree -a --ignore-glob .git'
alias treed='lsd --tree -a -d --ignore-glob .git --ignore-glob gen'

# JSON aliases
alias pbj='pbpaste | jq'

# Flush DNS cache
alias cacheclear='sudo dscacheutil -flushcache; sudo killall -HUP mDNSResponder'

# IP addresses
alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
alias localip="ipconfig getifaddr en0"
alias ips="ifconfig -a | grep -o 'inet6\? \(addr:\)\?\s\?\(\(\([0-9]\+\.\)\{3\}[0-9]\+\)\|[a-fA-F0-9:]\+\)' | awk '{ sub(/inet6? (addr:)? ?/, \"\"); print }'"

# Show active network interfaces
alias ifactive="ifconfig | pcregrep -M -o '^[^\t:]+:([^\n]|\n\t)*status: active'"

# Show/hide hidden files in Finder
alias show="defaults write com.apple.finder AppleShowAllFiles -bool true && killall Finder"
alias hide="defaults write com.apple.finder AppleShowAllFiles -bool false && killall Finder"

# Change Audio Output
alias audio='SwitchAudioSource -s "$(SwitchAudioSource -a | fzf)"'

# get current weather
alias weather="curl wttr.in"

# gradle aliases
alias fmt="./gradlew spotlessApply"
alias test="./gradlew test"

# Set fzf theme
export FZF_DEFAULT_OPTS=" \
--color=bg+:#313244,bg:#1e1e2e,spinner:#f5e0dc,hl:#f38ba8 \
--color=fg:#cdd6f4,header:#f38ba8,info:#cba6f7,pointer:#f5e0dc \
--color=marker:#f5e0dc,fg+:#cdd6f4,prompt:#cba6f7,hl+:#f38ba8"

